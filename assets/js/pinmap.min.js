!function(i){"use strict";i.fn.RenderPinmap=function(){var t=i(this),s=t.find(".ovic-pin"),n=t.data("width"),e=t.data("height");s.each(function(){var t=i(this).data("top"),s=i(this).data("left");t.substr&&"%"!=t.substr(-1)&&(t=t/e*100+"px"),s.substr&&"%"!=s.substr(-1)&&(s=s/n*100+"px"),i(this).css({top:t,left:s})})},i.fn.InitPinmap=function(){var t=i(this).find(".ovic-pin .action-pin");t.on("click",function(){var t=i(this),s=t.siblings(".ovic-popup");if(s.length){var n=t.closest(".ovic-pin");return n.hasClass("actived")?(n.removeClass("actived"),void setTimeout(function(){s.removeAttr("style")},300)):void setTimeout(function(){i(".ovic-pinmap .ovic-pin.actived").removeClass("actived"),n.addClass("actived")},300)}});var s="blur(2px)",n="grayscale(100%)",e=!1;t.hover(function(){var t=i(this);e=!0,t.closest(".blur").children("img").css("filter",s).css("webkitFilter",s).css("mozFilter",s).css("oFilter",s).css("msFilter",s),t.closest(".gray").children("img").css("filter",n).css("webkitFilter",n).css("mozFilter",n).css("oFilter",n).css("msFilter",n),t.closest(".mask").children(".mask").css("opacity",1)},function(){var t=i(this);e=!1,t.closest(".ovic-pinmap").children("img").removeAttr("style"),t.closest(".mask").children(".mask").removeAttr("style")})},i.fn.TogglePinmap=function(){i(this).each(function(){var t=i(this),s=t.closest(".ovic-pin"),n=s.find(".ovic-popup-tooltip"),e=s.data("trigger"),o=s.data("position");i(window).innerWidth()<900&&(o="auto"),t.OVICpopover({trigger:e,container:"body",sanitize:!1,placement:o,content:function(){return n.html()},html:!0})})},i(document).resize(function(){i(".ovic-pinmap").TogglePinmap()}),i(document).ready(function(){i(".ovic-pinmap").each(function(){i(this).RenderPinmap(),i(this).InitPinmap()}),i(".ovic-pinmap .action-pin").TogglePinmap()})}(window.jQuery);